<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ubuntu æ ‘è“æ´¾å¼€å¯ AP çƒ­ç‚¹ | Steven&#39;s blog</title>
<link rel="shortcut icon" href="https://steven-ok.github.io/favicon.ico?v=1637659447973">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://steven-ok.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="Ubuntu æ ‘è“æ´¾å¼€å¯ AP çƒ­ç‚¹ | Steven&#39;s blog - Atom Feed" href="https://steven-ok.github.io/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="
å‡ºäºæŸäº›åŸå› ï¼Œæˆ‘éœ€è¦åœ¨æˆ‘çš„æ ‘è“æ´¾ 4B ä¸Šæ‰“å¼€ä¸€ä¸ª Ap çƒ­ç‚¹ï¼Œç”¨äºå…±äº« LAN æ¥å£ç½‘ç»œç½‘ç»œ

æ ‘è“æ´¾ 4B æ‹¥æœ‰ä¸€ä¸ª åƒå…† LAN å£ï¼Œä»¥åŠä¸€ä¸ªåŒé¢‘çš„ 802.11ac æ— çº¿æ¨¡å—
å…·ä½“é…ç½®å¯å‚è€ƒ æ ‘è“æ´¾å®˜ç½‘ &gt;&gt;&gt;
..." />
    <meta name="keywords" content="æ ‘è“æ´¾,Linux" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://steven-ok.github.io">
  <img class="avatar" src="https://steven-ok.github.io/images/avatar.png?v=1637659447973" alt="">
  </a>
  <h1 class="site-title">
    Steven&#39;s blog
  </h1>
  <p class="site-description">
    Steven's blog
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          é¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="/post/about" class="menu">
          å…³äº
        </a>
      
    
  </div>
  <div class="social-container">
    
      
        <a href="http://github.com/steven-ok" target="_blank">
          <i class="ri-github-line"></i>
        </a>
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              Ubuntu æ ‘è“æ´¾å¼€å¯ AP çƒ­ç‚¹
            </h2>
            <div class="post-info">
              <span>
                2021-11-23
              </span>
              <span>
                3 min read
              </span>
              
                <a href="https://steven-ok.github.io/tag/CyhyU_H3x/" class="post-tag">
                  # æ ‘è“æ´¾
                </a>
              
                <a href="https://steven-ok.github.io/tag/0miaRsQrIA/" class="post-tag">
                  # Linux
                </a>
              
            </div>
            
              <img class="post-feature-image" src="https://steven-ok.github.io/post-images/ubuntu-shu-mei-pai-kai-qi-ap.svg" alt="">
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <blockquote>
<p>å‡ºäºæŸäº›åŸå› ï¼Œæˆ‘éœ€è¦åœ¨æˆ‘çš„æ ‘è“æ´¾ 4B ä¸Šæ‰“å¼€ä¸€ä¸ª Ap çƒ­ç‚¹ï¼Œç”¨äºå…±äº« LAN æ¥å£ç½‘ç»œç½‘ç»œ</p>
</blockquote>
<p>æ ‘è“æ´¾ 4B æ‹¥æœ‰ä¸€ä¸ª åƒå…† LAN å£ï¼Œä»¥åŠä¸€ä¸ªåŒé¢‘çš„ 802.11ac æ— çº¿æ¨¡å—</p>
<p>å…·ä½“é…ç½®å¯å‚è€ƒ <a href="https://www.raspberrypi.com/products/raspberry-pi-4-model-b/specifications/">æ ‘è“æ´¾å®˜ç½‘ &gt;&gt;&gt;</a></p>
<h4 id="å…·ä½“æ“ä½œæ–¹æ³•">å…·ä½“æ“ä½œæ–¹æ³•</h4>
<ol>
<li>
<p>å®‰è£…é¡¹ç›®<br>
æœ¬æ–‡ä½¿ç”¨é¡¹ç›®è„šæœ¬ä¸º <a href="https://github.com/oblique/create_ap">create_ap</a>ï¼Œè¯¥é¡¹ç›®å·²ç»åœæ›´ï¼Œä¸è¿‡ç›®å‰ä»ç„¶é€‚ç”¨ï¼Œä¸è¿‡åœ¨ä½œè€…çš„ issue ä¸­çœ‹åˆ°å¦å¤–ä¸€ä¸ªåˆ†å‰é¡¹ç›® <a href="https://github.com/garywill/linux-router">linux_router</a> ä»ç„¶æ´»è·ƒï¼Œæœ‰å…´è¶£å¯ä»¥å»å°è¯•ä½¿ç”¨ä¸€ä¸‹ğŸ˜„</p>
<pre><code class="language-php"> git clone https://github.com/oblique/create_ap
 cd create_ap
 sudo make install
</code></pre>
</li>
<li>
<p>å®‰è£…ä¾èµ–é¡¹</p>
<pre><code class="language-php"># è¯¥é¡¹ç›®ä½¿ç”¨åˆ°ä¸‹åˆ—ä¾èµ–é¡¹ç›®
sudo apt update
sudo apt install -y util-linux procps hostapd iproute2 iw haveged dnsmasq

</code></pre>
</li>
<li>
<p>é…ç½® Ap</p>
<pre><code class="language-php"># æŸ¥çœ‹ä½ çš„ç½‘å¡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ‰¾åˆ°ä½ çš„ LAN å£ å’Œ æ— çº¿ç½‘å¡
ifconfig

# ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªç®€å•çš„ wifi, å…¶ä¸­ wlan0 æ˜¯ä½ çš„æ— çº¿ç½‘å¡ï¼Œeth0 æ˜¯ä½ çš„ Lan å£ï¼Œctrl + c åœæ­¢
sudo create_ap wlan0 eth0 çƒ­ç‚¹å å¯†ç 

# create_ap ä½¿ç”¨ hostapd åˆ›å»º wifiï¼Œå¹¶ä½¿ç”¨ dnsmasq æä¾› dns åŠŸèƒ½, é…ç½®æ–‡ä»¶ä½äº /etc/create_ap.conf ä¸­
# å…¶ä¸­å…³é”®çš„ é…ç½® å¦‚ ä¸‹ â†“â†“â†“
IEEE80211N=1  # å¯ç”¨80211n
HT_CAPAB=[HT40+]  # å¦‚æœä¸è®¾ç½®é»˜è®¤é€Ÿç‡ä¸º 75Mbpsï¼Œè®¾ç½®åé€Ÿç‡ä¸º 150Mbps
FREQ_BAND=5 # å‚æ•° 5  2.4ï¼Œåˆ†åˆ«ä»£è¡¨ 5G å’Œ 2.4G é¢‘æ®µ
SSID=MyWifi # WIFI åç§°
PASSPHRASE=12345678 # WIFI å¯†ç 
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://steven-ok.github.io/post-images/1637657092082.png" alt="ifconfigæˆªå›¾" loading="lazy"></figure>
</li>
<li>
<p>æœåŠ¡é…ç½®</p>
<pre><code class="language-shell"># æ‰“å¼€ create_ap æœåŠ¡
sudo systemctl start create_ap.service
# è®¾ç½®æœåŠ¡å¼€æœºè‡ªå¯
sudo systemctl enable create_ap.service
</code></pre>
</li>
</ol>
<h4 id="è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜">è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜</h4>
<ul>
<li>
<p>å®‰è£…äº† dnsmasq åæ— æ³•å¼€å¯</p>
<ul>
<li>è¿™æ˜¯ç”±äºç³»ç»Ÿ systemd-resolved æœåŠ¡å ç”¨ 53 ç«¯å£å¯¼è‡´</li>
</ul>
<pre><code class="language-php"># å…³é—­ç³»ç»Ÿ systemd-resolved.service
sudo systemctl stop systemd-resolved.service

### å…³é—­åè‹¥å‡ºç°ä¸»æœºåæ— æ³•è§£æï¼Œå…ˆå¿½ç•¥è¯¥é”™è¯¯ï¼Œé…ç½®å®Œæˆå³å¯æ¢å¤æ­£å¸¸

# ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹å¦‚ä¸‹ä¸¤å¤„é…ç½®
sudo vim /etc/systemd/resolved.conf

DNS=114.114.114.114
DNSStubListener=no

# é‡å¯ systemd-resolved.service
sudo systemctl start systemd-resolved.service

# é‡æ–°è¦†ç›– /etc/resolv.conf é…ç½®
sudo ln -sf /run/systemd/resolve/resolv.conf /etc/resolv.conf
</code></pre>
</li>
<li>
<p>å…³äº WIFI é€Ÿç‡çš„é—®é¢˜</p>
<ul>
<li>ä»ç¡¬ä»¶ä¸Šçœ‹ï¼Œè¯¥ç½‘å¡æ”¯æŒ <code>802.11ac</code> ï¼Œå®é™…åœ¨é…ç½®æ–¹é¢ï¼Œå°è¯•è¿‡æœ€å¤§åªèƒ½æ‰“å¼€ <code>802.11n</code>ï¼Œå› æ­¤é€Ÿç‡åªæœ‰ <code>150Mbps</code>ï¼Œå¹¶ä¸” WIFI ä¿¡å·ä¸€èˆ¬ï¼Œå¹¶ä¸èƒ½ä½œä¸ºä¸“ä¸šè·¯ç”±å™¨ä½¿ç”¨ï¼Œä¸´æ—¶ç”¨æˆ–è€…è¾…åŠ©ä½¿ç”¨å°šå¯</li>
</ul>
</li>
</ul>
<blockquote>
<p>æœ¬æ–‡ä½¿ç”¨æ“ä½œç³»ç»Ÿä¸º:  Ubuntu Server 20.04.3 LTS<br>
å…¶ä»–ç³»ç»Ÿç‰ˆæœ¬ï¼Œå‡å¯ä½œä¸ºå‚è€ƒ</p>
</blockquote>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#%E5%85%B7%E4%BD%93%E6%93%8D%E4%BD%9C%E6%96%B9%E6%B3%95">å…·ä½“æ“ä½œæ–¹æ³•</a></li>
<li><a href="#%E8%BF%87%E7%A8%8B%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98">è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        

        

        <div class="site-footer">
  ğŸ‡¨ğŸ‡³  &nbsp;Powered by <a href="https://github.com" target="_blank">&nbsp;Github</a>
  <a class="rss" href="https://steven-ok.github.io/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
